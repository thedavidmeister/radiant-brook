language: php

php:
  - 5.6

env:
  - TASK=phpunit:travis
  - TASK=phpunit:clover
  - TASK=security:check
  - TASK=phpcs

before_script:
 - wget http://getcomposer.org/composer.phar
 - php composer.phar install --no-interaction

script:
 - mkdir -p build/logs
 - rake $TASK

after_script:
- php bin/coveralls -v
- bash <(curl -s https://codecov.io/bash)

notifications:
  email:
    on_success: never
    on_failure: never

cache:
  - composer
